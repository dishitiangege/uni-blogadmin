(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uni_modules-uni-upgrade-center-pages-version-add~uni_modules-uni-upgrade-center-pages-version-detail"],{"0094":function(e,t,n){"use strict";var r,a=n("da84"),i=n("e330"),o=n("6964"),u=n("f183"),s=n("6d61"),l=n("acac"),f=n("861d"),c=n("4fad"),p=n("69f3").enforce,d=n("cdce"),v=!a.ActiveXObject&&"ActiveXObject"in a,h=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},b=s("WeakMap",h,l);if(d&&v){r=l.getConstructor(h,"WeakMap",!0),u.enable();var m=b.prototype,_=i(m["delete"]),g=i(m.has),y=i(m.get),w=i(m.set);o(m,{delete:function(e){if(f(e)&&!c(e)){var t=p(this);return t.frozen||(t.frozen=new r),_(this,e)||t.frozen["delete"](e)}return _(this,e)},has:function(e){if(f(e)&&!c(e)){var t=p(this);return t.frozen||(t.frozen=new r),g(this,e)||t.frozen.has(e)}return g(this,e)},get:function(e){if(f(e)&&!c(e)){var t=p(this);return t.frozen||(t.frozen=new r),g(this,e)?y(this,e):t.frozen.get(e)}return y(this,e)},set:function(e,t){if(f(e)&&!c(e)){var n=p(this);n.frozen||(n.frozen=new r),g(this,e)?w(this,e,t):n.frozen.set(e,t)}else w(this,e,t);return this}})}},"10d1":function(e,t,n){n("0094")},"551b":function(e,t,n){"use strict";n("7a82");var r=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.fields=t.default=void 0;var a=r(n("c7eb")),i=r(n("3835")),o=r(n("1da1")),u=r(n("5530"));n("caad"),n("2532"),n("b64b");var s=n("e72c");function l(e){var t={};for(var n in s.validator)e.includes(n)&&(t[n]=s.validator[n]);return t}t.fields="appid,name,title,contents,platform,type,version,min_uni_version,url,stable_publish,is_silently,is_mandatory,create_date";var f={data:function(){return{labelWidth:"80px",enableiOSWgt:!0,silentlyContent:"静默更新：App升级时会在后台下载wgt包并自行安装。新功能在下次启动App时生效",mandatoryContent:"强制更新：App升级弹出框不可取消",stablePublishContent:"同时只可有一个线上发行版，线上发行不可更设为下线。\n未上线可以设为上线发行并自动替换当前线上发行版",stablePublishContent2:"使用本包替换当前线上发行版",uploadFileContent:"可下载安装包地址。上传文件到云存储自动填写，也可以手动填写",minUniVersionContent:"上次使用新Api或打包新模块的App版本",priorityContent:"检查更新时，按照优先级从大到小依次尝试跳转商店。如果都跳转失败，则会打开浏览器使用下载链接下载apk安装包",latestStableData:[],appFileList:null,type_valuetotext:s.enumConverter.type_valuetotext,preUrl:"",formData:{appid:"",name:"",title:"",contents:"",platform:[],type:"",version:"",min_uni_version:"",url:"",stable_publish:!1,create_date:null},formOptions:{platform_localdata:[{value:"Android",text:"安卓"},{value:"iOS",text:"苹果"}],type_localdata:[{value:"native_app",text:"原生App安装包"},{value:"wgt",text:"App资源包"}]},rules:(0,u.default)({},l(["appid","contents","platform","type","version","min_uni_version","url","stable_publish","title","name","is_silently","is_mandatory"]))}},onReady:function(){this.$refs.form.setRules(this.rules)},computed:{isWGT:function(){return"wgt"===this.formData.type},isiOS:function(){return!this.isWGT&&this.formData.platform.includes("iOS")},hasPackage:function(){return this.appFileList&&!!Object.keys(this.appFileList).length},fileExtname:function(){return this.isWGT?["wgt"]:["apk"]},platformLocaldata:function(){return this.isWGT?this.enableiOSWgt?this.formOptions.platform_localdata:[this.formOptions.platform_localdata[0]]:this.formOptions.platform_localdata},uni_platform:function(){return(this.isiOS?"iOS":"Android").toLocaleLowerCase()}},methods:{packageUploadSuccess:function(e){uni.showToast({icon:"success",title:"上传成功",duration:800}),this.preUrl=this.formData.url,this.formData.url=e.tempFilePaths[0]},packageDelete:function(e){var t=this;return(0,o.default)((0,a.default)().mark((function n(){var r,o,u;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hasPackage){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.$request("deleteFile",{fileList:[e.tempFilePath]},{functionName:"upgrade-center"});case 4:r=n.sent,o=(0,i.default)(r,1),u=o[0],u.success&&(uni.showToast({icon:"success",title:"删除成功",duration:800}),t.formData.url=t.preUrl,t.$refs.form.clearValidate("url"));case 8:case"end":return n.stop()}}),n)})))()},selectFile:function(){this.hasPackage&&uni.showToast({icon:"none",title:"只可上传一个文件，请删除已上传后重试",duration:1e3})},createCenterRecord:function(e){return(0,u.default)((0,u.default)({},e),{},{uni_platform:this.uni_platform,create_env:"upgrade-center"})},createCenterQuery:function(e){var t=e.appid;return{appid:t,create_env:"upgrade-center"}},createStatQuery:function(e){var t=e.appid,n=e.type,r=e.version,a=e.uni_platform;return{appid:t,type:n,version:r,uni_platform:a||this.uni_platform,create_env:"uni-stat",stable_publish:!1}}}};t.default=f},"5e0f":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var r={props:{content:String,top:{type:[Number,String],default:-60},left:{type:[Number,String],default:-100},width:{type:[Number,String],default:200}},data:function(){return{showStableInfo:!1,arrowStyle:{}}},methods:{mouseenter:function(e){this.showStableInfo=!0}}};t.default=r},"6f70":function(e,t,n){"use strict";n.r(t);var r=n("5e0f"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"7cec":function(e,t,n){var r=n("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.show-stable[data-v-5cb9e4c1]{width:200px;position:absolute;padding:5px 10px;background-color:#303133;color:#fff;border-radius:4px;border:1px solid #e9e9eb;z-index:99999}',""]),e.exports=t},"924a":function(e,t,n){var r=n("7cec");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=n("4f06").default;a("64d8d53c",r,!0,{sourceMap:!1,shadowMode:!1})},ab74:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={uniIcons:n("e59f").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{position:"relative"}},[n("uni-icons",{staticStyle:{padding:"0 10px",color:"#a8a8a8",cursor:"pointer"},attrs:{type:"info"},nativeOn:{mouseenter:function(t){arguments[0]=t=e.$handleEvent(t),e.mouseenter.apply(void 0,arguments)},mouseleave:function(t){arguments[0]=t=e.$handleEvent(t),e.showStableInfo=!1}}}),e.showStableInfo?n("v-uni-view",{staticClass:"show-stable",style:{top:e.top+"px",left:e.left+"px",width:e.width+"px"}},[n("v-uni-text",[e._v(e._s(e.content))])],1):e._e()],1)},i=[]},acac:function(e,t,n){"use strict";var r=n("e330"),a=n("6964"),i=n("f183").getWeakData,o=n("19aa"),u=n("825a"),s=n("7234"),l=n("861d"),f=n("2266"),c=n("b727"),p=n("1a2d"),d=n("69f3"),v=d.set,h=d.getterFor,b=c.find,m=c.findIndex,_=r([].splice),g=0,y=function(e){return e.frozen||(e.frozen=new w)},w=function(){this.entries=[]},x=function(e,t){return b(e.entries,(function(e){return e[0]===t}))};w.prototype={get:function(e){var t=x(this,e);if(t)return t[1]},has:function(e){return!!x(this,e)},set:function(e,t){var n=x(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=m(this.entries,(function(t){return t[0]===e}));return~t&&_(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,r){var c=e((function(e,a){o(e,d),v(e,{type:t,id:g++,frozen:void 0}),s(a)||f(a,e[r],{that:e,AS_ENTRIES:n})})),d=c.prototype,b=h(t),m=function(e,t,n){var r=b(e),a=i(u(t),!0);return!0===a?y(r).set(t,n):a[r.id]=n,e};return a(d,{delete:function(e){var t=b(this);if(!l(e))return!1;var n=i(e);return!0===n?y(t)["delete"](e):n&&p(n,t.id)&&delete n[t.id]},has:function(e){var t=b(this);if(!l(e))return!1;var n=i(e);return!0===n?y(t).has(e):n&&p(n,t.id)}}),a(d,n?{get:function(e){var t=b(this);if(l(e)){var n=i(e);return!0===n?y(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return m(this,e,t)}}:{add:function(e){return m(this,e,!0)}}),c}}},ae49:function(e,t,n){"use strict";n.r(t);var r=n("ab74"),a=n("6f70");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("b57c");var o=n("f0c5"),u=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"5cb9e4c1",null,!1,r["a"],void 0);t["default"]=u.exports},b57c:function(e,t,n){"use strict";var r=n("924a"),a=n.n(r);a.a},dbce:function(e,t,n){n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("7a82"),n("e439");var r=n("7037")["default"];function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=e[u]}return i["default"]=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports["default"]=e.exports},e72c:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.validator=t.enumConverter=void 0;t.validator={appid:{rules:[{required:!0},{format:"string"}],label:"AppID"},name:{rules:[{format:"string"}],label:"应用名称"},title:{rules:[{format:"string"}],label:"更新标题"},contents:{rules:[{required:!0},{format:"string"}],label:"更新内容"},platform:{rules:[{required:!0},{range:[{value:"Android",text:"安卓"},{value:"iOS",text:"苹果"}]}],label:"平台"},type:{rules:[{required:!0},{format:"string"},{range:[{value:"native_app",text:"原生App安装包"},{value:"wgt",text:"wgt资源包"}]}],label:"安装包类型"},version:{rules:[{required:!0},{format:"string"}],label:"版本号"},min_uni_version:{rules:[{format:"string"}],label:"原生App最低版本"},url:{rules:[{required:!0},{format:"string"}],label:"包地址"},stable_publish:{rules:[{format:"bool"}],label:"上线发行"},create_date:{rules:[{format:"timestamp"}],label:"上传时间"},is_silently:{rules:[{format:"bool"}],label:"静默更新",defaultValue:!1},is_mandatory:{rules:[{format:"bool"}],label:"强制更新",defaultValue:!1}};t.enumConverter={platform_valuetotext:[{value:"Android",text:"安卓"},{value:"iOS",text:"苹果"}],type_valuetotext:{native_app:"原生App安装包",wgt:"wgt资源包"}}},ea47:function(e,t,n){"use strict";n("7a82");var r=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.appVersionListDbName=t.appListDbName=void 0,t.deepClone=function e(t){if([null,void 0,NaN,!1].includes(t))return t;if("object"!==(0,a.default)(t)&&"function"!==typeof t)return t;var n=function(e){return"[object Array]"===Object.prototype.toString.call(e)}(t)?[]:{};for(var r in t)t.hasOwnProperty(r)&&(n[r]="object"===(0,a.default)(t[r])?e(t[r]):t[r]);return n},t.defaultDisplayApp=void 0;var a=r(n("53ca"));n("d3b7"),n("caad");t.appListDbName="opendb-app-list";t.appVersionListDbName="opendb-app-versions";t.defaultDisplayApp=""}}]);